(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4958d5f0"],{"02b2":function(t,e,o){t.exports=o.p+"img/未登录.a0f6edd6.png"},"0d54":function(t,e,o){"use strict";o("a420")},"0ec8":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mv-player-page"},[o("div",{staticClass:"nav"},[o("i",{staticClass:"iconfont icon-fanhui",on:{click:t.goBack}}),o("i",{staticClass:"iconfont icon-gengduoxiao"})]),o("div",{staticClass:"vdo-content"},[o("div",{staticClass:"vdo-box"},[o("video",{ref:"vdoEl",staticClass:"video-ele",on:{click:t.togglePlay,play:t.vdoPlay,pause:t.vdoPause,loadeddata:t.vdoLoadedData,timeupdate:t.vdoTimeUpdate,error:t.vdoError}})]),o("transition",{attrs:{name:"fadeIn"}},["paused"===t.playState?o("i",{staticClass:"iconfont icon-bofang2",on:{click:t.togglePlay}}):t._e()]),t.vdoInfo.id?o("div",{staticClass:"author-box"},[o("div",{staticClass:"artist"},[o("div",{staticClass:"avatar-box"},[o("img",{staticClass:"avatar",attrs:{src:t.vdoInfo.creator.avatarUrl||t.defaultImg,alt:""}}),t.vdoInfo.creator.identityIconUrl?o("img",{staticClass:"identityIcon",attrs:{src:t.vdoInfo.creator.identityIconUrl}}):t._e()]),o("div",{staticClass:"name"},[t._v(" "+t._s(t.vdoInfo.creator.nickname)+" ")]),t._m(0)]),o("div",{staticClass:"des-box"},[o("div",{staticClass:"title",on:{click:t.toggleShowDes}},[o("span",[t._v(t._s(t.vdoInfo.title))]),t.vdoInfo.description&&!t.showDes?o("i",{staticClass:"iconfont icon-triangle-down"}):t._e(),t.vdoInfo.description&&t.showDes?o("i",{staticClass:"iconfont icon-triangle-up"}):t._e()]),t.vdoInfo.description&&t.showDes?o("div",{staticClass:"des",domProps:{innerHTML:t._s(t.vdoInfo.description)}}):t._e()])]):t._e(),t.vdoInfo.id?o("div",{staticClass:"right-bar"},[o("div",{staticClass:"icon-box"},[o("i",{staticClass:"iconfont icon-z-likeFill"}),o("p",[t._v(t._s(t._f("formatNum")(t.vdoInfo.praisedCount)))])]),o("div",{staticClass:"icon-box"},[o("i",{staticClass:"iconfont icon-pinglunpt-wangyiicon"}),o("p",[t._v(t._s(t._f("formatNum")(t.vdoInfo.commentCount)))])]),o("div",{staticClass:"icon-box"},[o("i",{staticClass:"iconfont icon-fenxiangpt"}),o("p",[t._v(t._s(t._f("formatNum")(t.vdoInfo.shareCount)))])]),o("div",{staticClass:"icon-box"},[o("i",{staticClass:"iconfont icon-jia1"}),o("p",[t._v(t._s(t._f("formatNum")(t.vdoInfo.subscribeCount)))])])]):t._e(),o("div",{staticClass:"progress-box"},[o("van-slider",{attrs:{"bar-height":t.barHeight,"button-size":t.buttonSize,"active-color":t.activeColor,"inactive-color":t.inActiveColor},on:{input:t.progressChange,change:t.progressChangeEnd},model:{value:t.progressTime,callback:function(e){t.progressTime=e},expression:"progressTime"}})],1)],1),t._m(1)])},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"follow"},[o("i",{staticClass:"iconfont icon-jiahao"}),t._v("关注")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bottom"},[o("i",{staticClass:"iconfont icon-yinle"}),o("span",{attrs:{lang:""}},[t._v("暂无相关音乐!")])])}],a=o("1da1"),s=(o("96cf"),o("a4d3"),o("e01a"),o("ac1f"),o("5319"),o("b0c0"),o("4ec3")),r=o("5a84"),c={mixins:[r["a"]],name:"MvPlayer",data:function(){return{defaultImg:o("02b2"),vdoInfo:{},showDes:!1,playState:"paused",progressTime:0,activeColor:"rgba(255, 255, 255, .35)",inActiveColor:"rgba(255, 255, 255, .15)",barHeight:".03rem",buttonSize:".09rem"}},mounted:function(){this.$store.commit("changeLoading",!0),this.initSet()},methods:{initSet:function(){this.vdoEl=this.$refs.vdoEl},togglePlay:function(){this.vdoEl.paused?this.vdoEl.play():this.vdoEl.pause()},vdoPlay:function(){this.playState="playing",this.setButton("small")},vdoPause:function(){this.playState="paused",this.setButton("big")},vdoError:function(){console.log("error")},setButton:function(t){var e=this;this.progTimer&&clearTimeout(this.progTimer),this.progTimer="big"==t?setTimeout((function(){e.barHeight=".03rem",e.buttonSize=".09rem"}),200):setTimeout((function(){e.barHeight=".015rem",e.buttonSize=".04rem"}),1e3)},bigButton:function(){var t=this;this.barHeight=".03rem",this.buttonSize=".09rem",this.progTimer&&clearTimeout(this.progTimer),this.progTimer=setTimeout((function(){t.barHeight=".015rem",t.buttonSize=".04rem"}),1e3)},vdoTimeUpdate:function(){this.isDrag||(this.progressTime=this.vdoEl.currentTime/this.vdoEl.duration*100)},vdoLoadedData:function(){var t=this.vdoEl.videoWidth/this.vdoEl.videoHeight;t>=1?(this.vdoEl.style.objectFit="contain",this.vdoEl.parentElement.style.alignItems="center"):(this.vdoEl.style.objectFit="cover",this.vdoEl.parentElement.style.alignItems="flex-start")},progressChange:function(){this.isDrag=!0,this.bigButton()},progressChangeEnd:function(){this.vdoEl.currentTime=this.progressTime/100*this.vdoEl.duration,this.vdoEl.paused&&this.vdoEl.play(),this.isDrag=!1},toggleShowDes:function(){this.showDes=!this.showDes},videoGetData:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var i,n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Object(s["p"])(t);case 2:return i=o.sent,200===i.code?e.vdoInfo={id:t,creator:{id:i.data.creator.userId,nickname:i.data.creator.nickname,avatarUrl:i.data.creator.avatarUrl,identityIconUrl:i.data.creator.avatarDetail&&i.data.creator.avatarDetail.identityIconUrl},title:i.data.title,description:i.data.description&&i.data.description.replace(/\n/g,"<br>"),duration:i.data.durationms/1e3,commentCount:i.data.commentCount,praisedCount:i.data.praisedCount,shareCount:i.data.shareCount,subscribeCount:i.data.subscribeCount}:e.toast("获取视频详情错误"),o.next=6,Object(s["q"])(t);case 6:n=o.sent,200===n.code?e.vdoInfo.url=n.urls[0].url:e.toast("获取播放地址错误"),e.$nextTick((function(){e.$refs.vdoEl.setAttribute("src",e.vdoInfo.url),e.$refs.vdoEl.play()})),e.$store.commit("changeLoading",!1);case 10:case"end":return o.stop()}}),o)})))()},mvGetData:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var i,n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Object(s["m"])(t);case 2:return i=o.sent,200===i.code?e.vdoInfo={id:t,creator:{id:i.data.artists[0].id,nickname:i.data.artists[0].name,avatarUrl:i.data.artists[0].img1v1Url||i.data.cover},title:i.data.name,description:i.data.desc&&i.data.desc.replace(/\n/g,"<br>"),duration:i.data.duration/1e3,commentCount:i.data.commentCount,praisedCount:i.data.subCount,shareCount:i.data.shareCount,subscribeCount:i.data.subCount}:e.toast("获取视频详情错误"),o.next=6,Object(s["n"])(t,1080);case 6:n=o.sent,200===n.code?e.vdoInfo.url=n.data.url:e.toast("获取播放地址错误"),e.$nextTick((function(){e.$refs.vdoEl.setAttribute("src",e.vdoInfo.url),e.$refs.vdoEl.play()})),e.$store.commit("changeLoading",!1);case 10:case"end":return o.stop()}}),o)})))()},mlogGetData:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Object(s["l"])(t);case 2:if(i=o.sent,console.log(i),200!==i.code){o.next=8;break}e.videoGetData(i.data),o.next=11;break;case 8:throw e.toast("获取mlog错误! 该链接无法播放!",3e3),e.$store.commit("changeLoading",!1),"获取mlog错误! 该链接可能无法播放!";case 11:case"end":return o.stop()}}),o)})))()}},watch:{"$route.params.id":{handler:function(t){try{this.$store.commit("changeLoading",!0);var e=this.$route.query.type;"mv"===e?this.mvGetData(t):"video"===e?this.videoGetData(t):"mlog"===e&&this.mlogGetData(t)}catch(o){console.log("获取必要信息错误!"),this.toast("获取必要信息错误",2e3)}finally{this.$store.commit("changeLoading",!1)}},immediate:!0}}},d=c,l=(o("0d54"),o("a673"),o("2877")),u=Object(l["a"])(d,i,n,!1,null,"7a7c4a38",null);e["default"]=u.exports},"5a84":function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var i=o("1da1"),n=(o("96cf"),o("caad"),o("2532"),o("a9e3"),o("4ec3"),{data:function(){return{}},computed:{loginStatus:function(){return this.$store.getters.loginStatus},playerPlayList:function(){return this.$store.getters.playList},adoEl:function(){return this.$store.getters.adoEl},songId:function(){return this.$store.getters.songId}},methods:{goLogin:function(){!this.loginStatus&&this.$router.push({name:"Login"})},logout:function(){this.$store.dispatch("userLogout")},toggleMenu:function(){this.$store.commit("toggleMenu")},goBack:function(){var t=this.$store.getters.historyList;t.length>1?this.$router.go(-1):this.$router.push({name:"Find"})},clickMenu:function(){console.log("点击了菜单")},goSearch:function(){this.$router.push({name:"Search"})},toTop:function(){window.scroll({top:0,behavior:"smooth"})},goPlaylist:function(t){console.log("点击歌单:",t),this.$router.push({name:"PlayListDetail",params:{id:t}})},clickSong:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.$store.commit("changeSongId",String(t)),i=e.$store.getters.historyList,i.length<=1&&!window.location.href.includes("?player=show")&&(window.location.href+="?player=show"),e.$store.commit("changeShowPlayer",!0);case 4:case"end":return o.stop()}}),o)})))()},clickMvIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mv";this.$store.commit("changeMvId",Number(t)),this.$router.push({name:"MvPlayer",params:{id:t},query:{type:e}})},toast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500;this.$toast({message:t,className:"playerToast",duration:e,position:"bottom"})},copyText:function(t){var e=document.createElement("input");e.value=t,e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",document.body.appendChild(e),e.select(),document.execCommand("copy"),this.toast("复制成功! 快和小伙伴们分享吧!"),document.body.removeChild(e)},getScrollTop:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},getClientHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},getScrollHeight:function(){return document.body.scrollHeight||document.documentElement.scrollHeight}}})},a420:function(t,e,o){},a673:function(t,e,o){"use strict";o("be9c")},be9c:function(t,e,o){}}]);
//# sourceMappingURL=chunk-4958d5f0.28834eee.js.map